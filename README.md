# üñ®Ô∏è CloudChef Print Server

WebSocket —Å–µ—Ä–≤–µ—Ä –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥ –ø–µ—á–∞—Ç–∏ –º–µ–∂–¥—É –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º CloudChef –∏ –∞–≥–µ–Ω—Ç–∞–º–∏ –ø—Ä–∏–Ω—Ç–µ—Ä–∞.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –î–µ–ø–ª–æ–π –Ω–∞ Render.com

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ render.com** –∏ —Å–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç
2. **–°–æ–∑–¥–∞–π—Ç–µ Web Service** ‚Üí **Connect GitHub** ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `cloudchef-print-server`  
3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–µ–ø–ª–æ—è:**
   - **Environment:** `Node`
   - **Build Command:** `npm install` 
   - **Start Command:** `npm start`
   - **Port:** –û—Å—Ç–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `process.env.PORT`)

### 2. –ü–æ–ª—É—á–∏—Ç–µ URL —Å–µ—Ä–≤–µ—Ä–∞

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø–æ–ª—É—á–∏—Ç–µ URL –≤–∏–¥–∞: `https://cloudchef-print-server-abc123.onrender.com`

### 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

–í –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç URL –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:

```javascript
const socket = io('https://cloudchef-print-server-abc123.onrender.com');

// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –±—Ä–∞—É–∑–µ—Ä–∞
socket.emit('register_browser', {
  code: '123456', // 6-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥
  userInfo: {
    email: 'user@example.com',
    restaurant: 'My Restaurant'
  }
});

// –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–∞–Ω–¥—ã –ø–µ—á–∞—Ç–∏
socket.emit('print_command', {
  jobId: 'label_001',
  labelData: {
    name: '–ö—É—Ä–∏–Ω–æ–µ —Ñ–∏–ª–µ',
    expiry: '2024-01-15',
    chef: '–ê–ª–µ–∫—Å–µ–π',
    category: '–ú—è—Å–æ'
  },
  settings: {
    copies: 1,
    priority: 'normal'
  }
});
```

## üîå –°–æ–±—ã—Ç–∏—è WebSocket

### –ë—Ä–∞—É–∑–µ—Ä ‚Üí –°–µ—Ä–≤–µ—Ä

- `register_browser` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤–µ–±-–±—Ä–∞—É–∑–µ—Ä–∞
- `print_command` - –ö–æ–º–∞–Ω–¥–∞ –ø–µ—á–∞—Ç–∏ —ç—Ç–∏–∫–µ—Ç–∫–∏

### –°–µ—Ä–≤–µ—Ä ‚Üí –ë—Ä–∞—É–∑–µ—Ä  

- `registered` - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- `agent_connected` - –ê–≥–µ–Ω—Ç –ø–æ–¥–∫–ª—é—á–∏–ª—Å—è
- `agent_disconnected` - –ê–≥–µ–Ω—Ç –æ—Ç–∫–ª—é—á–∏–ª—Å—è
- `print_sent` - –ö–æ–º–∞–Ω–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –∞–≥–µ–Ω—Ç—É
- `print_result` - –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–µ—á–∞—Ç–∏

### –ê–≥–µ–Ω—Ç ‚Üí –°–µ—Ä–≤–µ—Ä

- `register_agent` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∞–≥–µ–Ω—Ç–∞ –ø—Ä–∏–Ω—Ç–µ—Ä–∞
- `print_result` - –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–µ—á–∞—Ç–∏
- `agent_heartbeat` - Keep-alive —Å–∏–≥–Ω–∞–ª

### –°–µ—Ä–≤–µ—Ä ‚Üí –ê–≥–µ–Ω—Ç

- `registered` - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏  
- `print_job` - –ó–∞–¥–∞–Ω–∏–µ –Ω–∞ –ø–µ—á–∞—Ç—å

## üìä –°–∏—Å—Ç–µ–º–∞ –∫–æ–¥–æ–≤

- **6-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥** –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –≤ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
- **–ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ** –¥–æ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –∫–æ–¥–∞
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–ø—Ä—è–∂–µ–Ω–∏–µ** –±—Ä–∞—É–∑–µ—Ä–∞ –∏ –∞–≥–µ–Ω—Ç–∞ –ø–æ –∫–æ–¥—É
- **–°—Ç–∞—Ç—É—Å—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è** –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (–º–æ–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ)
- –ö–æ–¥ —Å–æ–ø—Ä—è–∂–µ–Ω–∏—è - –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è  
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–°–µ—Ä–≤–µ—Ä –ª–æ–≥–∏—Ä—É–µ—Ç:
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è/–æ—Ç–∫–ª—é—á–µ–Ω–∏—è
- –ö–æ–º–∞–Ω–¥—ã –ø–µ—á–∞—Ç–∏  
- –û—à–∏–±–∫–∏
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ
npm run dev
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–û—Ç–∫—Ä–æ–π—Ç–µ `test.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.

## üåê –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    WebSocket    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Web App        ‚îÇ ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí ‚îÇ  Render Server  ‚îÇ
‚îÇ  (Browser)      ‚îÇ     Socket.io    ‚îÇ  (Node.js)      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                             ‚Üï
                                       WebSocket
                                       Socket.io
                                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                     ‚îÇ  Print Agent    ‚îÇ
                                     ‚îÇ  (Electron)     ‚îÇ
                                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- `socket.io` - WebSocket –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è
- `express` - HTTP —Å–µ—Ä–≤–µ—Ä
- `cors` - Cross-Origin Resource Sharing

## üö® –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Render.com

- **WebSocket –ø–æ–¥–¥–µ—Ä–∂–∫–∞:** ‚úÖ –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ–ª–≥–æ–∂–∏–≤—É—â–∏—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- **–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω:** ‚úÖ 750 —á–∞—Å–æ–≤ –≤ –º–µ—Å—è—Ü (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è 24/7)  
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π:** ‚úÖ GitHub integration
- **Memory:** 512 MB (–±–µ—Å–ø–ª–∞—Ç–Ω–æ), –¥–æ 16 GB (–ø–ª–∞—Ç–Ω–æ)
- **Concurrent connections:** –ë–µ–∑ –ª–∏–º–∏—Ç–æ–≤ –Ω–∞ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- **SSL:** ‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π HTTPS –∏–∑ –∫–æ—Ä–æ–±–∫–∏

## üìä Health Check

Render.com –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞:
- **Endpoint:** `/health`
- **Response:** –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. URL —Å–µ—Ä–≤–µ—Ä–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π  
2. –ö–æ–¥ —Å–æ–ø—Ä—è–∂–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π (6 —Ü–∏—Ñ—Ä)
3. –ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –æ—à–∏–±–æ–∫ WebSocket
4. –õ–æ–≥–∏ Render.com –≤ Dashboard
